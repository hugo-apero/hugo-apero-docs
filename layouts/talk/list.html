{{ define "main" }}
<main class="page-main pa4" role="main">
  <section class="blog-intro mw7 center mb5">
    <h2 class="f2 f1-ns lh-solid tc center fw4">{{ .Title | markdownify }}</h2>
    <p class="f5 f5-ns measure lh-copy tc center">{{ .Description | markdownify }}</p>
    {{ if .Params.show_author_byline }}<p class="f6 measure lh-copy tc center i">{{ if .Params.author }}Written by {{ .Params.author }}{{ end }}</p>{{ end }}
  </section>
  <section class="blog-content mw7 center">
    {{ $caller := . }}
    {{ $paginator := .Paginate ((where .RegularPages "Type" .Section).GroupByDate "2006") }}
    {{ range $paginator.PageGroups}}
    <!--each year starts a new column-->
    <div class="article-list flex flex-column flex-row-ns mb2 items-start bt">
      <div class="w-10 pr4"><h3 class="pt3 mt0">{{ .Key }}</h3></div>
      <div class="w-90 pl4 pv3">
      {{ range .Pages }}
          {{ .Scratch.Set "$root" $caller }}
          {{ partial "shared/summary-compact.html" . }}
      {{ end }}
      </div>
    </div> <!--close flex-column-->        
    {{ end }}
    {{ partial "shared/list-pagination.html" . }}
  </section>
</main>
{{ end }}
